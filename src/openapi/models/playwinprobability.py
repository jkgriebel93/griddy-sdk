"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from openapi.types import BaseModel, Nullable, OptionalNullable, UNSET, UNSET_SENTINEL
import pydantic
from pydantic import model_serializer
from typing import Optional
from typing_extensions import Annotated, NotRequired, TypedDict


class PlayWinProbabilityTypedDict(TypedDict):
    down: NotRequired[int]
    r"""Down number (0 for kickoffs and special plays, 1-4 for regular plays)"""
    home_score: NotRequired[int]
    r"""Home team score after the play"""
    home_team_win_probability_added: NotRequired[Nullable[float]]
    r"""Win Probability Added (WPA) for home team on this play"""
    home_timeouts_left: NotRequired[int]
    r"""Number of timeouts remaining for home team"""
    play_description: NotRequired[str]
    r"""Detailed description of the play or game event"""
    play_id: NotRequired[int]
    r"""Unique play identifier"""
    possession_team_id: NotRequired[str]
    r"""Team ID with possession (4-digit string)"""
    post_play_home_team_win_probability: NotRequired[Nullable[float]]
    r"""Home team win probability after the play (0-1)"""
    post_play_visitor_team_win_probability: NotRequired[Nullable[float]]
    r"""Visiting team win probability after the play (0-1)"""
    pre_snap_home_score: NotRequired[int]
    r"""Home team score before the play"""
    pre_snap_home_team_win_probability: NotRequired[Nullable[float]]
    r"""Home team win probability before the play (0-1, null for game start)"""
    pre_snap_visitor_score: NotRequired[int]
    r"""Visitor team score before the play"""
    pre_snap_visitor_team_win_probability: NotRequired[Nullable[float]]
    r"""Visitor team win probability before the play (0-1, null for game start)"""
    quarter: NotRequired[int]
    r"""Quarter number (1-4, or 5 for overtime)"""
    sequence: NotRequired[float]
    r"""Play sequence number (can be decimal for special plays)"""
    visitor_score: NotRequired[int]
    r"""Visitor team score after the play"""
    visitor_team_win_probability_added: NotRequired[Nullable[float]]
    r"""Win Probability Added (WPA) for visitor team on this play (negative of home WPA)"""
    visitor_timeouts_left: NotRequired[int]
    r"""Number of timeouts remaining for visitor team"""
    yardline: NotRequired[str]
    r"""Field position description (e.g., \"NE 27\" or empty for special plays)"""
    yardline_number: NotRequired[Nullable[int]]
    r"""Yard line number (null for special plays)"""
    yardline_side: NotRequired[Nullable[str]]
    r"""Side of field (team abbreviation or null for midfield/special plays)"""
    yards_to_go: NotRequired[int]
    r"""Yards needed for first down"""


class PlayWinProbability(BaseModel):
    down: Optional[int] = None
    r"""Down number (0 for kickoffs and special plays, 1-4 for regular plays)"""

    home_score: Annotated[Optional[int], pydantic.Field(alias="homeScore")] = None
    r"""Home team score after the play"""

    home_team_win_probability_added: Annotated[
        OptionalNullable[float], pydantic.Field(alias="homeTeamWinProbabilityAdded")
    ] = UNSET
    r"""Win Probability Added (WPA) for home team on this play"""

    home_timeouts_left: Annotated[
        Optional[int], pydantic.Field(alias="homeTimeoutsLeft")
    ] = None
    r"""Number of timeouts remaining for home team"""

    play_description: Annotated[
        Optional[str], pydantic.Field(alias="playDescription")
    ] = None
    r"""Detailed description of the play or game event"""

    play_id: Annotated[Optional[int], pydantic.Field(alias="playId")] = None
    r"""Unique play identifier"""

    possession_team_id: Annotated[
        Optional[str], pydantic.Field(alias="possessionTeamId")
    ] = None
    r"""Team ID with possession (4-digit string)"""

    post_play_home_team_win_probability: Annotated[
        OptionalNullable[float], pydantic.Field(alias="postPlayHomeTeamWinProbability")
    ] = UNSET
    r"""Home team win probability after the play (0-1)"""

    post_play_visitor_team_win_probability: Annotated[
        OptionalNullable[float],
        pydantic.Field(alias="postPlayVisitorTeamWinProbability"),
    ] = UNSET
    r"""Visiting team win probability after the play (0-1)"""

    pre_snap_home_score: Annotated[
        Optional[int], pydantic.Field(alias="preSnapHomeScore")
    ] = None
    r"""Home team score before the play"""

    pre_snap_home_team_win_probability: Annotated[
        OptionalNullable[float], pydantic.Field(alias="preSnapHomeTeamWinProbability")
    ] = UNSET
    r"""Home team win probability before the play (0-1, null for game start)"""

    pre_snap_visitor_score: Annotated[
        Optional[int], pydantic.Field(alias="preSnapVisitorScore")
    ] = None
    r"""Visitor team score before the play"""

    pre_snap_visitor_team_win_probability: Annotated[
        OptionalNullable[float],
        pydantic.Field(alias="preSnapVisitorTeamWinProbability"),
    ] = UNSET
    r"""Visitor team win probability before the play (0-1, null for game start)"""

    quarter: Optional[int] = None
    r"""Quarter number (1-4, or 5 for overtime)"""

    sequence: Optional[float] = None
    r"""Play sequence number (can be decimal for special plays)"""

    visitor_score: Annotated[Optional[int], pydantic.Field(alias="visitorScore")] = None
    r"""Visitor team score after the play"""

    visitor_team_win_probability_added: Annotated[
        OptionalNullable[float], pydantic.Field(alias="visitorTeamWinProbabilityAdded")
    ] = UNSET
    r"""Win Probability Added (WPA) for visitor team on this play (negative of home WPA)"""

    visitor_timeouts_left: Annotated[
        Optional[int], pydantic.Field(alias="visitorTimeoutsLeft")
    ] = None
    r"""Number of timeouts remaining for visitor team"""

    yardline: Optional[str] = None
    r"""Field position description (e.g., \"NE 27\" or empty for special plays)"""

    yardline_number: Annotated[
        OptionalNullable[int], pydantic.Field(alias="yardlineNumber")
    ] = UNSET
    r"""Yard line number (null for special plays)"""

    yardline_side: Annotated[
        OptionalNullable[str], pydantic.Field(alias="yardlineSide")
    ] = UNSET
    r"""Side of field (team abbreviation or null for midfield/special plays)"""

    yards_to_go: Annotated[Optional[int], pydantic.Field(alias="yardsToGo")] = None
    r"""Yards needed for first down"""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = [
            "down",
            "homeScore",
            "homeTeamWinProbabilityAdded",
            "homeTimeoutsLeft",
            "playDescription",
            "playId",
            "possessionTeamId",
            "postPlayHomeTeamWinProbability",
            "postPlayVisitorTeamWinProbability",
            "preSnapHomeScore",
            "preSnapHomeTeamWinProbability",
            "preSnapVisitorScore",
            "preSnapVisitorTeamWinProbability",
            "quarter",
            "sequence",
            "visitorScore",
            "visitorTeamWinProbabilityAdded",
            "visitorTimeoutsLeft",
            "yardline",
            "yardlineNumber",
            "yardlineSide",
            "yardsToGo",
        ]
        nullable_fields = [
            "homeTeamWinProbabilityAdded",
            "postPlayHomeTeamWinProbability",
            "postPlayVisitorTeamWinProbability",
            "preSnapHomeTeamWinProbability",
            "preSnapVisitorTeamWinProbability",
            "visitorTeamWinProbabilityAdded",
            "yardlineNumber",
            "yardlineSide",
        ]
        null_default_fields = []

        serialized = handler(self)

        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)
            serialized.pop(k, None)

            optional_nullable = k in optional_fields and k in nullable_fields
            is_set = (
                self.__pydantic_fields_set__.intersection({n})
                or k in null_default_fields
            )  # pylint: disable=no-member

            if val is not None and val != UNSET_SENTINEL:
                m[k] = val
            elif val != UNSET_SENTINEL and (
                not k in optional_fields or (optional_nullable and is_set)
            ):
                m[k] = val

        return m
